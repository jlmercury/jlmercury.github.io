---
title: プリミティブとオブジェクト
layout: post
date: 2021-02-11
tags: [GAS, JavaScript]
excerpt: ノンプロ研中級GAS講座第三回の振り返りです。JavaScriptにおけるデータ型の違い、すなわち、プリミティブ型とオブジェクトが違うものだということについて書いています。
---

[ノンプロ研](https://tonari-it.com/community-nonpro-semi/)中級GAS講座3日目を受講しました。テーマは「組み込みオブジェクト」。

今までで一番「わからない」と思ったことが多い回でした。はてな？と思ったことがいっぱいあったので自分なりに復習をしてみました。

## プリミティブならばオブジェクトではない

JavaScript Primerというサイトを参考にしました。引用しながら進めていきます。

[ラッパーオブジェクト - JavaScript Primer](https://jsprimer.net/basic/wrapper-object/)

>JavaScriptのデータ型はプリミティブ型とオブジェクトに分けられます。
{:.quote}

まずはこの一文。これはすなわち、

```
プリミティブならばオブジェクトではない

オブジェクトならばプリミティブではない
```
<br>
ということを意味しています。当たり前なのですが、このことが自分はよくわかってなかったみたい。

数学の偶数と奇数のように、プリミティブ型とオブジェクトは相互に違う存在なのだ。

### JSではプリミティブ型はオブジェクトではない

JSではプリミティブ型はオブジェクトではないため、本来なら

```js
"hoge".split()
```
のように、プリミティブに対しいきなりメソッドを効かせることはできないはず。しかし実際はできる。

これはなぜかというと、JSが**実行時にプリミティブをオブジェクトに変換してくれている**から。このあたりが「動的型付け言語」ってことに大きく関係している。

### 参照のタイプはデータ型に一致

第1回で、値渡しと参照渡しということを習ったけれど、プリミティブ値は値渡し、オブジェクトは参照渡し、ということになっている。データ型の違いが、参照の仕方と対応しているんだ。

| データ型     | 参照のタイプ |
| ------------ | ------------ |
| プリミティブ | 値渡し       |
| オブジェクト | 参照渡し     |

### Rubyとの違い

プログラミング言語Rubyでは、文字通り全てがオブジェクト。これは、Rubyにおける文字列は、Stirngというクラスからできていることを示す。

```rb
# irb
>> "hoge".class
=> String
```
<br>
一方、JavaScriptにクラスは存在しない。この辺はJavaScriptがクラス指向ではなくプロトタイプ指向、というのと関係していそう。

## プリミティブ型

| 型名               | 具体例（リテラル）   | 具体例（ラッパー）     |
| ------------------ | -------------------- | ---------------------- |
| 真偽値 (Boolean)   | `true`または `false` | `new Boolean(true)`    |
| 数値(Number)       | `42`                 | `new Number(42)`       |
| 巨大な数値(BigInt) | `9007199254740992n`  | `new BigInt()`         |
| 文字列(String)     | `"foobar"`           | `new String('foobar')` |
| undefined          | 存在しない           | ?                      |
| null               | `null`               | ?                      |
| シンボル(Symbol)   | ?                    | `new Symbol()`         |


## オブジェクト

プリミティブ型以外のデータ。

| 型名         | 具体例 （リテラル）           | 具体例 （ラッパー） |
| ------------ | ----------------------------- | ------------------- |
| オブジェクト | `{ name: 'Taro' }`            | `new Object()`      |
| 配列         | `['ant', 'bat', 'cat']`       | `new Array()`       |
| 関数         | `function myFunction() {...}` | `new Function()`    |
| 正規表現     | `/d+/g`                       | `new RegExp()`      |
| Date         | なし？                        | `new Date()`        |




## 参考

[データ型とリテラル · JavaScript Primer](https://jsprimer.net/basic/data-type/)
